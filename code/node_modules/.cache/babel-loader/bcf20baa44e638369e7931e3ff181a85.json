{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nvar _mosaicStyled = require(\"./mosaicStyled\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n\n  if (obj != null) {\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n        if (desc && (desc.get || desc.set)) {\n          Object.defineProperty(newObj, key, desc);\n        } else {\n          newObj[key] = obj[key];\n        }\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar MosaicGround = /*#__PURE__*/function (_PureComponent) {\n  _inherits(MosaicGround, _PureComponent);\n\n  function MosaicGround(props) {\n    var _this;\n\n    _classCallCheck(this, MosaicGround);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MosaicGround).call(this, props));\n    _this.excuteEffect = _this.excuteEffect.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(MosaicGround, [{\n    key: \"excuteEffect\",\n    value: function excuteEffect() {\n      (function () {\n        var Photo, addListeners, canvas, createGrid, ctx, gridItem, grids, height, img, imgInfo, imgSrc, imgs, init, magnet, mouse, populateCanvas, _render, resizeCanvas, rotateAndPaintImage, updateMouse, useGrid, width;\n\n        canvas = document.getElementById('canvas');\n        ctx = canvas.getContext('2d');\n        width = canvas.width = window.innerWidth;\n        height = canvas.height = window.innerHeight;\n        imgSrc = canvas.dataset.image;\n        img = new Image();\n        useGrid = true;\n        imgInfo = {};\n        imgs = [];\n        grids = [];\n        magnet = 2000;\n        mouse = {\n          x: 1,\n          y: 0\n        };\n\n        init = function init() {\n          addListeners();\n\n          img.onload = function (e) {\n            var numberToShow; // Check for firefox. \n\n            imgInfo.width = e.path ? e.path[0].width : e.target.width;\n            imgInfo.height = e.path ? e.path[0].height : e.target.height;\n            numberToShow = Math.ceil(window.innerWidth / imgInfo.width) * Math.ceil(window.innerHeight / imgInfo.height);\n\n            if (useGrid) {\n              createGrid();\n            }\n\n            populateCanvas(numberToShow * 4);\n            canvas.classList.add('ready');\n            return _render();\n          };\n\n          return img.src = imgSrc;\n        };\n\n        addListeners = function addListeners() {\n          window.addEventListener('resize', resizeCanvas);\n          window.addEventListener('mousemove', updateMouse);\n          return window.addEventListener('touchmove', updateMouse);\n        };\n\n        updateMouse = function updateMouse(e) {\n          mouse.x = e.clientX;\n          return mouse.y = e.clientY;\n        };\n\n        resizeCanvas = function resizeCanvas() {\n          width = canvas.width = window.innerWidth;\n          return height = canvas.height = window.innerHeight;\n        };\n\n        populateCanvas = function populateCanvas(nb) {\n          var i, p, results;\n          i = 0;\n          results = [];\n\n          while (i <= nb) {\n            p = new Photo();\n            imgs.push(p);\n            results.push(i++);\n          }\n\n          return results;\n        };\n\n        createGrid = function createGrid() {\n          var c, grid, i, imgScale, item, j, k, l, r, ref, ref1, ref2, results, x, y;\n          imgScale = 0.5;\n          grid = {\n            row: Math.ceil(window.innerWidth / (imgInfo.width * imgScale)),\n            cols: Math.ceil(window.innerHeight / (imgInfo.height * imgScale)),\n            rowWidth: imgInfo.width * imgScale,\n            colHeight: imgInfo.height * imgScale\n          };\n\n          for (r = j = 0, ref = grid.row; 0 <= ref ? j < ref : j > ref; r = 0 <= ref ? ++j : --j) {\n            x = r * grid.rowWidth;\n\n            for (c = k = 0, ref1 = grid.cols; 0 <= ref1 ? k < ref1 : k > ref1; c = 0 <= ref1 ? ++k : --k) {\n              y = c * grid.colHeight;\n              item = new gridItem(x, y, grid.rowWidth, grid.colHeight);\n              grids.push(item);\n            }\n          }\n\n          results = [];\n\n          for (i = l = 0, ref2 = grids.length; 0 <= ref2 ? l < ref2 : l > ref2; i = 0 <= ref2 ? ++l : --l) {\n            results.push(grids[i].draw());\n          }\n\n          return results;\n        };\n\n        gridItem = function gridItem() {\n          var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          var w = arguments.length > 2 ? arguments[2] : undefined;\n          var h = arguments.length > 3 ? arguments[3] : undefined;\n\n          this.draw = function () {\n            ctx.drawImage(img, x, y, w, h);\n          };\n        };\n\n        Photo = function Photo() {\n          var TO_RADIANS, finalX, finalY, forceX, forceY, h, r, seed, w, x, y;\n          seed = Math.random() * (2.5 - 0.7) + 0.7;\n          w = imgInfo.width / seed;\n          h = imgInfo.height / seed;\n          x = window.innerWidth * Math.random();\n          finalX = x;\n          y = window.innerHeight * Math.random();\n          finalY = y;\n          console.log(\"INIT Y :: \".concat(finalY, \" || INIT X :: \").concat(finalX));\n          r = Math.random() * (180 - -180) + -180;\n          forceX = 0;\n          forceY = 0;\n          TO_RADIANS = Math.PI / 180;\n\n          this.update = function () {\n            var distance, dx, dy, powerX, powerY, x0, x1, y0, y1;\n            x0 = x;\n            y0 = y;\n            x1 = mouse.x;\n            y1 = mouse.y;\n            dx = x1 - x0;\n            dy = y1 - y0;\n            distance = Math.sqrt(dx * dx + dy * dy);\n            powerX = x0 - dx / distance * magnet / distance;\n            powerY = y0 - dy / distance * magnet / distance;\n            forceX = (forceX + (finalX - x0) / 2) / 2.1;\n            forceY = (forceY + (finalY - y0) / 2) / 2.2;\n            x = powerX + forceX;\n            y = powerY + forceY;\n          };\n\n          this.draw = function () {\n            return rotateAndPaintImage(ctx, img, r * TO_RADIANS, x, y, w / 2, h / 2, w, h);\n          };\n        };\n\n        rotateAndPaintImage = function rotateAndPaintImage(context, image, angle, positionX, positionY, axisX, axisY, widthX, widthY) {\n          context.translate(positionX, positionY);\n          context.rotate(angle);\n          context.drawImage(image, -axisX, -axisY, widthX, widthY);\n          context.rotate(-angle);\n          return context.translate(-positionX, -positionY);\n        };\n\n        _render = function render() {\n          var x, y;\n          x = 0;\n          y = 0;\n          ctx.clearRect(0, 0, width, height);\n\n          while (y < grids.length) {\n            grids[y].draw();\n            y++;\n          }\n\n          while (x < imgs.length) {\n            imgs[x].update();\n            imgs[x].draw();\n            x++;\n          }\n\n          return requestAnimationFrame(_render);\n        };\n\n        init();\n      }).call(this);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.excuteEffect();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$dataImage = this.props.dataImage,\n          dataImage = _this$props$dataImage === void 0 ? 'http://unsplash.it/g/450/200/?random=1' : _this$props$dataImage;\n      return _react[\"default\"].createElement(\"div\", {\n        className: this.props.className || ''\n      }, _react[\"default\"].createElement(_mosaicStyled.Mosaic, null, _react[\"default\"].createElement(\"canvas\", {\n        id: \"canvas\",\n        \"data-image\": dataImage\n      }), _react[\"default\"].createElement(\"div\", {\n        className: \"intro\"\n      })));\n    }\n  }]);\n\n  return MosaicGround;\n}(_react.PureComponent);\n\nvar _default = MosaicGround;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/cssEffects/mosaicGround/mosaic.jsx"],"names":["MosaicGround","PureComponent","canvas","document","ctx","width","window","height","imgSrc","img","useGrid","imgInfo","imgs","grids","magnet","mouse","x","y","init","addListeners","e","numberToShow","Math","createGrid","populateCanvas","render","updateMouse","resizeCanvas","i","results","p","imgScale","grid","row","cols","rowWidth","colHeight","r","j","ref","c","k","ref1","item","l","ref2","gridItem","w","h","Photo","seed","finalX","finalY","console","forceX","forceY","TO_RADIANS","x0","y0","x1","y1","dx","dy","distance","powerX","powerY","rotateAndPaintImage","context","requestAnimationFrame","dataImage"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport _ from 'lodash'\r\nimport $ from 'jquery'\r\n\r\n// import './mosaic.scss'\r\nimport { Mosaic } from './mosaicStyled'\r\n\r\nclass MosaicGround extends PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.excuteEffect = this.excuteEffect.bind(this)\r\n  }\r\n\r\n  excuteEffect() {\r\n    (function () {\r\n      var Photo, addListeners, canvas, createGrid, ctx, gridItem, grids, height, img, imgInfo, imgSrc, imgs, init, magnet, mouse, populateCanvas, render, resizeCanvas, rotateAndPaintImage, updateMouse, useGrid, width;\r\n\r\n      canvas = document.getElementById('canvas');\r\n\r\n      ctx = canvas.getContext('2d');\r\n\r\n      width = canvas.width = window.innerWidth;\r\n\r\n      height = canvas.height = window.innerHeight;\r\n\r\n      imgSrc = canvas.dataset.image;\r\n\r\n      img = new Image();\r\n\r\n      useGrid = true;\r\n\r\n      imgInfo = {};\r\n\r\n      imgs = [];\r\n\r\n      grids = [];\r\n\r\n      magnet = 2000;\r\n\r\n      mouse = {\r\n        x: 1,\r\n        y: 0\r\n      };\r\n\r\n\r\n      init = function () {\r\n        addListeners();\r\n        img.onload = function (e) {\r\n          var numberToShow;\r\n          // Check for firefox. \r\n          imgInfo.width = e.path ? e.path[0].width : e.target.width;\r\n          imgInfo.height = e.path ? e.path[0].height : e.target.height;\r\n          numberToShow = Math.ceil(window.innerWidth / imgInfo.width) * Math.ceil(window.innerHeight / imgInfo.height);\r\n          if (useGrid) {\r\n            createGrid();\r\n          }\r\n          populateCanvas(numberToShow * 4);\r\n          canvas.classList.add('ready');\r\n          return render();\r\n        };\r\n        return img.src = imgSrc;\r\n      };\r\n\r\n      addListeners = function () {\r\n        window.addEventListener('resize', resizeCanvas);\r\n        window.addEventListener('mousemove', updateMouse);\r\n        return window.addEventListener('touchmove', updateMouse);\r\n      };\r\n\r\n      updateMouse = function (e) {\r\n        mouse.x = e.clientX;\r\n        return mouse.y = e.clientY;\r\n      };\r\n\r\n      resizeCanvas = function () {\r\n        width = canvas.width = window.innerWidth;\r\n        return height = canvas.height = window.innerHeight;\r\n      };\r\n\r\n      populateCanvas = function (nb) {\r\n        var i, p, results;\r\n        i = 0;\r\n        results = [];\r\n        while (i <= nb) {\r\n          p = new Photo();\r\n          imgs.push(p);\r\n          results.push(i++);\r\n        }\r\n        return results;\r\n      };\r\n\r\n      createGrid = function () {\r\n        var c, grid, i, imgScale, item, j, k, l, r, ref, ref1, ref2, results, x, y;\r\n        imgScale = 0.5;\r\n        grid = {\r\n          row: Math.ceil(window.innerWidth / (imgInfo.width * imgScale)),\r\n          cols: Math.ceil(window.innerHeight / (imgInfo.height * imgScale)),\r\n          rowWidth: imgInfo.width * imgScale,\r\n          colHeight: imgInfo.height * imgScale\r\n        };\r\n\r\n        for (r = j = 0, ref = grid.row; 0 <= ref ? j < ref : j > ref; r = 0 <= ref ? ++j : --j) {\r\n          x = r * grid.rowWidth;\r\n          for (c = k = 0, ref1 = grid.cols; 0 <= ref1 ? k < ref1 : k > ref1; c = 0 <= ref1 ? ++k : --k) {\r\n            y = c * grid.colHeight;\r\n            item = new gridItem(x, y, grid.rowWidth, grid.colHeight);\r\n            grids.push(item);\r\n          }\r\n        }\r\n        results = [];\r\n        for (i = l = 0, ref2 = grids.length; 0 <= ref2 ? l < ref2 : l > ref2; i = 0 <= ref2 ? ++l : --l) {\r\n          results.push(grids[i].draw());\r\n        }\r\n        return results;\r\n      };\r\n\r\n      gridItem = function (x = 0, y = 0, w, h) {\r\n        this.draw = function () {\r\n          ctx.drawImage(img, x, y, w, h);\r\n        };\r\n      };\r\n\r\n      Photo = function () {\r\n        var TO_RADIANS, finalX, finalY, forceX, forceY, h, r, seed, w, x, y;\r\n        seed = Math.random() * (2.5 - 0.7) + 0.7;\r\n        w = imgInfo.width / seed;\r\n        h = imgInfo.height / seed;\r\n        x = window.innerWidth * Math.random();\r\n        finalX = x;\r\n        y = window.innerHeight * Math.random();\r\n        finalY = y;\r\n        console.log(`INIT Y :: ${finalY} || INIT X :: ${finalX}`);\r\n        r = Math.random() * (180 - -180) + -180;\r\n        forceX = 0;\r\n        forceY = 0;\r\n        TO_RADIANS = Math.PI / 180;\r\n        this.update = function () {\r\n          var distance, dx, dy, powerX, powerY, x0, x1, y0, y1;\r\n          x0 = x;\r\n          y0 = y;\r\n          x1 = mouse.x;\r\n          y1 = mouse.y;\r\n          dx = x1 - x0;\r\n          dy = y1 - y0;\r\n          distance = Math.sqrt(dx * dx + dy * dy);\r\n          powerX = x0 - dx / distance * magnet / distance;\r\n          powerY = y0 - dy / distance * magnet / distance;\r\n          forceX = (forceX + (finalX - x0) / 2) / 2.1;\r\n          forceY = (forceY + (finalY - y0) / 2) / 2.2;\r\n          x = powerX + forceX;\r\n          y = powerY + forceY;\r\n        };\r\n        this.draw = function () {\r\n          return rotateAndPaintImage(ctx, img, r * TO_RADIANS, x, y, w / 2, h / 2, w, h);\r\n        };\r\n      };\r\n\r\n      rotateAndPaintImage = function (context, image, angle, positionX, positionY, axisX, axisY, widthX, widthY) {\r\n        context.translate(positionX, positionY);\r\n        context.rotate(angle);\r\n        context.drawImage(image, -axisX, -axisY, widthX, widthY);\r\n        context.rotate(-angle);\r\n        return context.translate(-positionX, -positionY);\r\n      };\r\n\r\n      render = function () {\r\n        var x, y;\r\n        x = 0;\r\n        y = 0;\r\n        ctx.clearRect(0, 0, width, height);\r\n        while (y < grids.length) {\r\n          grids[y].draw();\r\n          y++;\r\n        }\r\n        while (x < imgs.length) {\r\n          imgs[x].update();\r\n          imgs[x].draw();\r\n          x++;\r\n        }\r\n        return requestAnimationFrame(render);\r\n      };\r\n\r\n      init();\r\n\r\n    }).call(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.excuteEffect()\r\n  }\r\n\r\n  render() {\r\n    const { dataImage = 'http://unsplash.it/g/450/200/?random=1' } = this.props\r\n    return (\r\n      <div className={this.props.className || ''}>\r\n        <Mosaic>\r\n          <canvas id=\"canvas\" data-image={dataImage}></canvas>\r\n          <div className=\"intro\"></div>\r\n        </Mosaic>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MosaicGround"]},"metadata":{},"sourceType":"script"}